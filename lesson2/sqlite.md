# Sqlite

## Урок 2

###На этот раз по Sqlite домашку выполняю в последнюю очередь. Не в последнюю очередь хочется посмотреть поведение type affinity.
Поэтому сразу ввожу запрос на создание таблицы из домашки Mysql. База "заругалась" только на дерективу
unsigned. Выпиливаем её. Получился запрос:
```sql
CREATE TABLE `goods` (  `id` serial, `title` varchar(255), `description` longtext,
                        `short_annotation` tinytext,
                        `vendor_code` char(8) NOT NULL,
                        `image_url` varchar(255),
                        `price` decimal(8,2) NOT NULL,
                        `sales_start_day` timestamp DEFAULT CURRENT_TIMESTAMP,
                        `quantity` smallint,
                        `exists` boolean DEFAULT false);
```
###Который, как ни странно, сработал.
Проверяем типы полей, которые получились. А не видим мы типы. Типы указаны те, что мы назначили в запросе.

Вставляем персую строку:
```sql
INSERT INTO `goods` (`title`, `description`, `short_annotation`, `vendor_code`, `image_url`, `price`, `quantity`, `exists`)
VALUES ('WeThePeople Envy',
        'Он всегда совершенен. Тем не менее, из года в год мы одержимы желанием сделать его ещё лучше, байком мечты любого райдера, желающего кататься как Про. Его рама и вилка, выполненные на 100% из 4130 Sanco, получившие термообработку и захватывающий дух дизайн Black Titan. Гармоничное дополнение в виде россыпи украшающих фреймсет компонентов Eclat, включая жирные покрышки Stevie Churchill Signature и шатуны Aeon, готовые крошить бетон. Трепетное внимание к деталям выражено и в наличие втулок Blind, за качество которых ручается сам Shane Weston. Зверь, вызывающий зависть, стал ещё лучше.',

        'Главной особенностью велосипеда BMX является полное отсутствие подвески и наличие всего лишь одной передачи. В остальном же вариации могут быть разными. Еще одно, не менее важное отличие - очень маленький вес, в пределах 11 кг.',
        12124322,
        '/images/bicycle1.png',
        44040,
        7,
        1);
```
####Запрос был успешно выполнен. Ничего не обрезалось. Ещё бы, здесь ведь нет ни tinytext ни char ни varchar, а есть только текст. decimal естественно без плавающей точки. Boolean тоже обычный int
####Вставляем следующий запрос:
```sql
INSERT INTO `goods` (`title`, `description`, `short_annotation`, `vendor_code`, `image_url`, `price`, `quantity`, `exists`)
VALUES ('Norco AURUM C7.1',
        'Этот карбоновый боец создан в тесном сотрудничестве с командой Norco Factory Racing и проверен в гонках Кубка мира по даунхиллу. Технология изменения размеров рамы Gravity Tune позволяет райдеру найти идеальную посадку и правильно распределять вес тела. Колеса 650B пришли в скоростной спуск всерьез и надолго, а вместе с ними вы получаете дополнительное сцепление в поворотах и меньше тряски на неровностях. Трансмиссия X0 DH на 7 скоростей и карбоновые шатуны от Sram существенно облегчают байк, а руль Race Face из углеволокна шириной 800 мм делает управление легким и точным в любых условиях.',

        'Горный велосипед - двухподвес',
        432563473,
        '/images/bicycle2.png',
        241120,
        2,
        true);
```
Ничто не предвещало беды. 9 символов в артикуле легко, однако значение true и без кавычек оказалось непосильно.
```sql
no such column: true: INSERT INTO `goods` (`title`, `description`, `short_annotation`, `vendor_code`, `image_url`, `price`, `quantity`, `exists`)
```
###Может в следующем запросе пройдет всё удачнее:
```sql
INSERT INTO `goods` (`title`, `description`, `short_annotation`, `vendor_code`, `image_url`, `price`, `quantity`, `exists`)
VALUES ('GT FORCE X Carbon PRO',
        'Разнообразие – вот, пожалуй, самое короткое и емкое определение All Mountain. Любой из Force проведет вас везде, где только может проехать велосипед, и бережно вернет домой. А флагман линейки Force X Carbon Pro сделает это с необычайными легкостью и изяществом. Полностью карбоновая рама с подвеской A.O.S. 150 миллиметров, колеса 27.5 дюймов, элитный набор компонентов - всё в этом байке нацелено на то, что вы проведете в седле весь день, покорите новые вершины, насладитесь длинными спусками, а когда вернетесь домой – будете с улыбкой вспоминать прошедший день и планировать новые приключения.',

        'Горный велосипед - двухподвес даунхил',
         2324668,
        '/images/bicycle3.png',
        '241120',
        3,
        '');
```
####И получили пустое значение в boolean! Хотя какой может быть boolean в sqlite?
###Следующий запрос? Результат с boolean понятен итак. Попробуем проверить работает ли директива NOT NULL, например поле price:
```sql
INSERT INTO `goods` (`title`, `description`, `short_annotation`, `vendor_code`, `image_url`, `quantity`, `exists`)
VALUES ('Jamis XENITH PRO',
        INSERT INTO `goods` (`title`, `description`, `short_annotation`, `vendor_code`, `image_url`, `quantity`, `exists`)
        VALUES ('Jamis XENITH PRO',
                'Для многих людей шоссейный велосипед олицетворяет единственную правильную сущность двухколесной машины. Именно для таких людей Jamis из года в год совершенствует свою шоссейную линейку, и эта модель весом 7,2 кг отвечает самым высоким требованиям любителей гонок по асфальту. Полностью карбоновая рама и вилка, а также оборудование Sram Force22 позволят не только тренироваться с максимальной эффективностью, но и бороться за победу в соревнованиях.',
        
                'Шоссейный велосипед нового поколения',
                12145468,
                '/images/bicycle4.png',
                2,
                100);
```
#### Ошибка:
```sql
NOT NULL constraint failed: goods.price
```
#### Все работает ожидаемо
###И конечно же стоит отметить, что sqlite поддерживает поле timestamp и директива DEFAULT CURRENT_TIMESTAMP прекрасно отработала, вставив в
поля время создания записей.
